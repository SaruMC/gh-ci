###
#
#  @file ci.yml
#  @copyright 2023-2024 SaruMC. All rights reserved.
#
#  @version 1.2.3
#  @author SaruMC
#  @date 2024-03-15
#
# This script executes all verifications for the runners
#
###

name: CI

env:
  SCRIPTS_FOLDER: scripts

on:
  push:
    branches: [ "main" ]
  pull_request:
    branches: [ "main" ]

jobs:
  checkout:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v3

  check-files:
    runs-on: ubuntu-latest
    needs: [checkout]
    steps:
      - name: Navigate to repository root
        run: cd ${{ github.workspace }}

      - name: Debug
        run: ls -la

      - name: Check required files
        run: ${{ env.SCRIPTS_FOLDER }}/check_files.sh

  check-ci:
    runs-on: ubuntu-latest
    needs: [checkout]
    steps:
      - name: Navigate to repository root
        run: cd ${{ github.workspace }}

      - name: CI check
        run: ${{ env.SCRIPTS_FOLDER }}/check_ci.sh rebase

  check-header:
    runs-on: ubuntu-latest
    needs: [checkout]
    steps:
      - name: Navigate to repository root
        run: cd ${{ github.workspace }}

      - name: Header comments check
        run: ${{ env.SCRIPTS_FOLDER }}/check_header.sh
